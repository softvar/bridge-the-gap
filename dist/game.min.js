"use strict";var utils={getRandomInt:function(a,b){return Math.floor(Math.random()*(b-a+1))+a},pI:function(a){return parseInt(a,10)},clamp:function(a,b,c){return"number"!=typeof b&&(b=-(1/0)),"number"!=typeof c&&(c=1/0),Math.max(b,Math.min(c,a))},getLocalStorageData:function(){return utils.pI(atob(localStorage.getItem("gameBridgerHighestScore")))||0},setLocalStorageData:function(a){localStorage.setItem("gameBridgerHighestScore",btoa(a))}},Bridge=function(){this.bridge=document.getElementById("bridge")};Bridge.prototype.startBuilding=function(){var a=this.bridge.style.height=0;this.bridge.className="inline-block",game.isReversedMode?this.bridge.style.left=game.sceneWidth-utils.pI(game.secondBuilding.style.width)-3+"px":this.bridge.style.left=utils.pI(game.firstBuilding.style.width)-3+"px",this.bridge.style.bottom=game.buildingHeight+"px",this.startBuildingInterval=setInterval(function(){self.bridge.style.height=a+"px",a+=2,game.isReversedMode?self.bridge.style.height=utils.clamp(utils.pI(self.bridge.style.height),0,game.sceneWidth-utils.pI(game.secondBuilding.style.width))+"px":self.bridge.style.height=utils.clamp(utils.pI(self.bridge.style.height),0,game.sceneWidth-utils.pI(game.firstBuilding.style.width))+"px"},5)},Bridge.prototype.stopBuilding=function(){clearInterval(this.startBuildingInterval),game.isReversedMode?this.bridge.className="anti-rotate-90":this.bridge.className="rotate-90"},Bridge.prototype.checkBridgePlacement=function(){if(game.isReversedMode){var a=utils.pI(this.bridge.style.left)-utils.pI(this.bridge.style.height)+3,b=utils.pI(game.firstBuilding.style.left),c=utils.pI(game.firstBuilding.style.width);console.log(a,b,c),a>b+c?(console.log("shorter"),game.gameOverPosteriors()):b>a?(console.log("bigger"),game.gameOverPosteriors()):a>b+c/2-3&&b+c/2+3>a?(game.scoreElement.innerHTML=utils.pI(game.scoreElement.innerHTML)+2,game.gameBonusPointElement.className="inline-block  game-bonus-point  game-bonus-point-anim",setTimeout(function(){game.gameBonusPointElement.className="game-bonus-point  hidden"},1500),game.updateHighestScore(),game.moveAhead()):(console.log("okay"),game.scoreElement.innerHTML=utils.pI(game.scoreElement.innerHTML)+1,game.updateHighestScore(),game.moveAhead())}else{var a=utils.pI(this.bridge.style.left)+utils.pI(this.bridge.style.height)+3,d=utils.pI(game.secondBuilding.style.left),e=utils.pI(game.secondBuilding.style.width);d>a?game.gameOverPosteriors():a>d+e?game.gameOverPosteriors():a>d+e/2-3&&d+e/2+3>a?(game.scoreElement.innerHTML=utils.pI(game.scoreElement.innerHTML)+2,game.gameBonusPointElement.className="inline-block  game-bonus-point  game-bonus-point-anim",setTimeout(function(){game.gameBonusPointElement.className="game-bonus-point  hidden"},1500),game.updateHighestScore(),game.moveAhead()):(game.scoreElement.innerHTML=utils.pI(game.scoreElement.innerHTML)+1,game.updateHighestScore(),game.moveAhead())}};var Game=function(){this.firstBuilding=document.getElementById("first-building"),this.secondBuilding=document.getElementById("second-building"),this.secondBuildingMidSpot=document.getElementById("second-building__mid-spot"),this.scoreElement=document.getElementsByClassName("game-score")[0],this.scoreElement.innerHTML=0,this.highestScoreElement=document.getElementsByClassName("game-highest-score")[0],this.highestScoreElement.innerHTML=utils.getLocalStorageData(),this.gameOverElement=document.getElementsByClassName("game-end")[0],this.gameRestartElement=document.getElementsByClassName("game-restart")[0],this.gameBonusPointElement=document.getElementsByClassName("game-bonus-point")[0],this.windoWidth=Math.max(document.documentElement.clientWidth,window.innerWidth||0),this.windowHeight=Math.max(document.documentElement.clientHeight,window.innerHeight||0),this.minBuildingWidth=8,this.sceneWidth=500,this.buildingHeight=this.windowHeight-65-this.sceneWidth;this.isReversedMode=!0,document.getElementsByClassName("buildings")[0].style.height=this.windowHeight-65+"px"};Game.prototype.init=function(){this.addBuildings(),this.addEventListeners()},Game.prototype.addBuildings=function(a){var b;a?(b=utils.pI(this.secondBuilding.style.width),this.firstBuilding.style.width=b+"px",this.firstBuilding.style.height=this.secondBuilding.style.height,this.isReversedMode||(this.firstBuilding.style.left=0)):(b=utils.getRandomInt(this.minBuildingWidth,this.sceneWidth/2),this.firstBuilding.style.width=b+"px",this.firstBuilding.style.height=this.buildingHeight+"px",this.isReversedMode||(this.firstBuilding.style.left=0));var c,d={};this.isReversedMode?(this.secondBuilding.style.right=0,c=utils.getRandomInt(this.minBuildingWidth,this.sceneWidth/2),console.log(c),this.firstBuilding.style.width=utils.getRandomInt(this.minBuildingWidth,this.sceneWidth-c-5),this.firstBuilding.style.left=utils.getRandomInt(this.minBuildingWidth,this.sceneWidth-c-5-utils.pI(this.firstBuilding.style.width))+"px",console.log(this.firstBuilding.style.left,this.minBuildingWidth,this.firstBuilding.style.width),this.secondBuildingMidSpot.style.left=utils.pI(this.firstBuilding.style.left)+utils.pI(this.firstBuilding.style.width)/2-3+"px"):(d.x=utils.getRandomInt(b+5,this.sceneWidth-this.minBuildingWidth),this.secondBuilding.style.left=d.x+"px",c=utils.getRandomInt(this.minBuildingWidth,this.sceneWidth-d.x),this.secondBuildingMidSpot.style.left=d.x+c/2-3+"px"),this.secondBuilding.style.width=c+"px",this.secondBuilding.style.height=this.buildingHeight+"px",this.secondBuildingMidSpot.style.bottom=this.buildingHeight+"px"},Game.prototype.addEventListeners=function(){var a=new Bridge;this.mouseDown=function(b){self.isMouseDown=!0,self.isIntroHidden||(document.getElementsByClassName("intro")[0].className="intro  anim",setTimeout(function(){document.getElementsByClassName("intro")[0].className="intro hidden",self.isIntroHidden=!0},1500)),a.startBuilding()},this.mouseUp=function(b){self.isMouseDown&&(a.stopBuilding(),game.removeEventListeners(),a.checkBridgePlacement(),self.isMouseDown=!1)};var b=document.getElementsByClassName("buildings")[0];b.addEventListener("mousedown",this.mouseDown),b.addEventListener("mouseup",this.mouseUp)},Game.prototype.removeEventListeners=function(){var a=document.getElementsByClassName("buildings")[0];a.removeEventListener("mousedown",game.mouseDown,!1),a.removeEventListener("mouseup",game.mouseUp,!1)},Game.prototype.moveAhead=function(){setTimeout(function(){self.bridge.className="hidden",game.addBuildings(!0),game.addEventListeners()},500)},Game.prototype.gameOverPosteriors=function(){game.gameOverElement.style.display="inline-block",game.updateHighestScore(),this.removeEventListeners(),setTimeout(function(){this.bridge.style.height=utils.clamp(utils.pI(this.bridge.style.height),0,game.buildingHeight-1)+"px",game.isReversedMode?this.bridge.className="anti-rotate-180":this.bridge.className="rotate-180"},500),setTimeout(function(){this.bridge.className="hidden"},600)},Game.prototype.updateHighestScore=function(){var a=utils.getLocalStorageData(),b=game.scoreElement.innerHTML;utils.pI(game.scoreElement.innerHTML)<a||(utils.setLocalStorageData(b),game.highestScoreElement.innerHTML=b)};var game;window.onload=function(){game=new Game,game.init(),game.gameRestartElement.addEventListener("click",function(){game.gameOverElement.style.display="none",game=null,game=new Game,game.init()});for(var a=document.getElementById("ocean"),b=10,c=Math.floor(500/b),d=document.createDocumentFragment(),e=0;c>e;e++){var f=document.createElement("div");f.className+=" wave",d.appendChild(f),f.style.left=e*b+"px",f.style.webkitAnimationDelay=e/100+"s"}a.appendChild(d)};